---
title: "03_traitement"
author: "Psqrt"
date: "16/12/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Packages et fonctions externes

```{r, message=F, warning=F}
source("./0_packages.R")
```

```{r}
type_col = readRDS("./../data/data_sel_type_col.rds")
data_sel = data.table::fread(file = "./../data/data_sel.csv", colClasses = type_col) %>% as.data.frame()
```

## AFDM

```{r}
library("FactoMineR") 
library("factoextra")
```

```{r}
df<- data_sel %>% filter(dataset=="train")
res_famd <- FAMD(df[-c(1:3)], graph = FALSE)
saveRDS(object = res_famd,
      file = "./../data/res_famd.rds")
```

```{r}
res_famd<-readRDS("./../data/res_famd.rds")
```


```{r}
eig_val<-get_eigenvalue(res_famd)
head(eig_val)
```

```{r}
plot(res_famd$quali.var$coord)
```


## Tables croisÃ©es avec la target

```{r}
liste_var_factor = type_col[type_col == "factor"]
levels(data_sel$ps_calc_01) = c(0:9)
levels(data_sel$ps_calc_02) = c(0:9)
levels(data_sel$ps_calc_03) = c(0:9)
```

```{r}
for (var in names(liste_var_factor)[2:length(liste_var_factor)]){
    print(gg_contingence_freq(get("var")))
}
```





## Transformation des variables continues
